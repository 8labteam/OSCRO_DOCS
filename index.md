# 使用指南

## 集群资源

**前置条件**

1.  kubernetes集群已就绪
2.  kubeopt服务成功运行

### **新增集群**

- 使用admin账号登录OSCRO云管理平台，集群管理 → 点击【新增】按钮

![](.\images\1.png)

- 填写资源名称：k8s-prod，主机域名：kubeopt对外服务地址端口 ，yaml：填写kubeconfig内容 ，点击【确定】

![](.\images\2.png)

### 资源池管理

- 【资源池管理】→ 【新增】

![](.\images\32.png)

- 选择工作空间、资源，对IP或端口类型进行管理

![](.\images\33.png)

## 平台管理

### 项目管理

#### 工作空间

- 项目管理 → 工作空间 → 点击【新增】按钮

![](.\images\3.png)

- 填写工作空间名称 → 配额上限CPU、MEM → 点击【提交】按钮

![](.\images\4.png)

**资源分配**

- 点击操作••• → 【绑定资源】

![](.\images\7.png)

- 根据已有的选择集群资源，点击【绑定】按钮，工作空间分配资源（配额需小于工作空间限额）

![](.\images\6.png)

#### 名称空间

- 项目管理 → 名称空间 → 点击【新增】按钮

![](.\images\5.png)

- 填写工作空间名称 → 配额上限CPU、MEM → 点击【提交】按钮





### 用户管理

- **角色描述：**

| 角色名称   | 角色权限说明                                                 |
| ---------- | ------------------------------------------------------------ |
| 超级管理员 | 具有平台的所有权限                                           |
| 管理员     | 管理拥有的项目管理能力，无容器管理权限                       |
| 运维工程师 | 具备所属项目的应用管理、容器管理、流水线管理                 |
| 测试工程师 | 具备所属项目的应用管理、容器管理、流水线管理，但不具备工作负载控制器操作和开发环境管理 |
| 开发工程师 | 具备所属项目的应用管理、容器管理、流水线管理，但不具备工作负载控制器操作 |

#### 创建用户

#### 授权用户

- 用户管理 → 用户角色 → 点击【授权用户】按钮

![](.\images\9.png)

- 填写用户名 → 选择角色 → 选择名称空间：工作空间/名称空间 → 点击【确定】按钮

![](.\images\10.png)

### 审计管理

#### 用户审计

- 【审计管理】 → 【用户审计】，可选择时间段、功能模块、用户等进行条件查询

![](.\images\23.png)

## 应用中心

### 应用模板

- 使用admin账号登录OSCRO云管理平台【模板管理】→ 【新增】

![](.\images\24.png)

- 填写模板名称，点击【确认】

![](.\images\25.png)

- 编辑YAML

![](.\images\26.png)

- 编辑YAML模板 → 【保存】

![](.\images\27.png)

### 应用模组

### 基础应用

**创建基础应用**

- 应用中心 → 基础应用 → 选择命名空间 → 点击【新增】按钮

![](.\images\11.png)

- 填写基础应用名称 → 点击【确认】按钮

![](.\images\12.png)

**添加YAML**

- 点击操作••• → 创建YAML

![](.\images\13.png)

- 填写yaml名称 → 选择基础模板类型（deployment|service|configmap） → 点击【确定】

![](.\images\14.png)

**自定义基础应用YAML**

- 点击操作••• → 查看YAML → 点击小眼睛查看yaml

![](.\images\16.png)

### 生成应用

**基于应用模板生成应用**

- 点击操作••• → 生成应用 → 点击运行态配置项【VALUE】→ 填写YAML名称、镜像地址、容器名称、资源配额信息 → 点击【保存】

![](.\images\17.png)

- 左侧栏点击应用管理查看当前存在应用，选择命名空间，点击操作••• → 运行应用 → 点击【确认】

![](.\images\20.png)

## 容器管理

### 工作负载

#### 查看容器日志

- 容器管理进入【工作负载】→ 【容器组】 → 选择相应命名空间 → 点击右侧操作•••菜单

![](.\images\18.png)

- 点击【日志】按钮，弹出容器日志窗口

![](.\images\19.png)

#### 进入容器终端

- 点击相应容器组进入 → 【容器组】→ 点击操作控制台按钮

![](.\images\21.png)

#### 查看容器监控

- 点击相应容器组进入 → 【监控】→ 点击操作控制台按钮

![](.\images\22.png)	

## Devops管理

### 创建流水线

- 【流水线管理】→ 【流水线】→ 【新增】

![](.\images\28.png)

- 按照输入框说明进行填写，更新容器镜像相当于持续部署，绑定现有容器或自动构建

![](.\images\29.png)

### 执行记录

- 【流水线管理】 → 【执行记录】→ 点击相应记录可查看详细执行日志

![](.\images\30.png)

![](.\images\31.png)